from git import Repo
import json
import os


def clone_git_from_json(project_path, repo_url):
    try:
        Repo.clone_from(repo_url, project_path)
    except:
        print(f"{repo_url} already exists")


if __name__ == "__main__":
    if not os.path.exists("./examples"):
        os.makedirs("./examples")

    local_path = os.path.join(os.getcwd(), "examples")
    with open("malware.json", "rb") as f:
        mal = json.load(f)
    for malware in mal:
        name = malware['name']
        repo_url = malware['git_url']
        type = malware['type']
        specific_path = os.path.join(local_path, f"./{name}")
        clone_git_from_json(specific_path, repo_url)
